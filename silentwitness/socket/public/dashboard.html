<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Silent Witness Dashboard</title> <link rel="stylesheet" href="style.css"> <script src="/socket.io/socket.io.js"></script> </head> <body> <header class="header"> <h1>Silent Witness Dashboard</h1> <button class="back-btn" onclick="window.location.href='/'">← Back</button> </header> <main> <h2>Submitted Reports</h2> <h3>Latest 20 Reports</h3> <div id="reports-container" class="reports-container"> <p>Loading reports...</p> </div> </main> <script> const socket = io(); // Fetch initial reports async function loadReports() { try { const response = await fetch('/reports'); const data = await response.json(); renderReports(data); } catch (err) { console.error("Failed to load reports:", err); document.getElementById('reports-container').innerHTML = "<p>⚠ Failed to load reports.</p>"; } } // Render reports function renderReports(reports) { const container = document.getElementById('reports-container'); container.innerHTML = ""; if (!reports.length) { container.innerHTML = "<p>No reports found.</p>"; return; } reports.forEach(r => { const div = document.createElement('div'); div.className = "report-card"; div.innerHTML = <p><strong>${r.name || "Anonymous"}</strong></p> <p>${r.incident}</p> <small>${new Date(r.timestamp).toLocaleString()}</small> ; container.appendChild(div); }); } // Live updates via socket socket.on('report_submitted', (report) => { const container = document.getElementById('reports-container'); const div = document.createElement('div'); div.className = "report-card"; div.innerHTML = <p><strong>${report.name || "Anonymous"}</strong></p> <p>${report.incident}</p> <small>${new Date(report.timestamp).toLocaleString()}</small> ; container.prepend(div); // newest first }); // Load on page start document.addEventListener("DOMContentLoaded", loadReports); </script> </body> </html>